"use strict";(self.webpackChunkfitniss_tracker=self.webpackChunkfitniss_tracker||[]).push([[808],{8808:(lt,x,o)=>{o.r(x),o.d(x,{TrainingModule:()=>st});var N=o(4466),S=o(7407),C=o(9116),g=o(3645),t=o(4650),u=o(6897),c=o(6895),_=o(3848),Y=o(560),T=o(1090),U=o(5188),m=o(4006),O=o(3238),f=o(9549),J=o(4385),d=o(3546),h=o(9101),y=o(1572),l=o(1576);function b(n,a){if(1&n&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Q(n,a){if(1&n&&(t.TgZ(0,"mat-form-field")(1,"mat-select",7),t.YNc(2,b,2,2,"mat-option",8),t.ALo(3,"async"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,1,e.exercises$))}}function w(n,a){1&n&&t._UZ(0,"mat-spinner")}function L(n,a){if(1&n&&(t.TgZ(0,"button",12),t._uU(1,"Start"),t.qZA()),2&n){t.oxw(2);const e=t.MAs(2);t.Q6J("disabled",e.invalid)}}function P(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.fetchExercises())}),t._uU(1,"Fetch Again"),t.qZA()}}function I(n,a){if(1&n&&(t.TgZ(0,"mat-card-actions",4),t.YNc(1,L,2,1,"button",10),t.ALo(2,"async"),t.YNc(3,P,2,0,"button",11),t.ALo(4,"async"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.exercises$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(4,4,e.exercises$))}}let F=(()=>{class n{constructor(e,i,r){this.trainingService=e,this.uiService=i,this.store=r}ngOnInit(){this.isLoading$=this.store.select(Y.Vc),this.exercises$=this.store.select(g.Ev),this.fetchExercises()}onStartTraining(e){this.trainingService.startExercise(e.value.exercise)}fetchExercises(){this.trainingService.fetchAvailableExercises()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.O),t.Y36(U.F),t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-new-training"]],decls:14,vars:11,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex.xs","100%","fxFlex","400px"],["fxLayoutAlign","center"],[4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["placeholder","Choose Exercise","ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","submit","mat-button","",3,"disabled",4,"ngIf"],["type","button","mat-button","",3,"click",4,"ngIf"],["type","submit","mat-button","",3,"disabled"],["type","button","mat-button","",3,"click"]],template:function(e,i){if(1&e){const r=t.EpF();t.TgZ(0,"section",0)(1,"form",1,2),t.NdJ("ngSubmit",function(){t.CHM(r);const ct=t.MAs(2);return t.KtG(i.onStartTraining(ct))}),t.TgZ(3,"mat-card",3)(4,"mat-card-title",4),t._uU(5,"Time to start a workout!"),t.qZA(),t.TgZ(6,"mat-card-content",4),t.YNc(7,Q,4,3,"mat-form-field",5),t.ALo(8,"async"),t.ALo(9,"async"),t.YNc(10,w,1,0,"mat-spinner",5),t.ALo(11,"async"),t.qZA(),t.YNc(12,I,5,6,"mat-card-actions",6),t.ALo(13,"async"),t.qZA()()()}2&e&&(t.xp6(7),t.Q6J("ngIf",t.lcZ(8,3,!t.lcZ(9,5,i.isLoading$)&&i.exercises$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(11,7,i.isLoading$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(13,9,i.isLoading$)))},dependencies:[c.sg,c.O5,m._Y,m.JJ,m.JL,m.Q7,m.On,m.F,O.ey,f.KE,J.gD,d.a8,d.dn,d.n5,d.hq,h.lW,y.Ou,l.xw,l.Wh,l.yH,c.Ov],styles:[".new-training[_ngcontent-%COMP%]{padding:30px}"]}),n})();var p=o(5938);let M=(()=>{class n{constructor(e){this.passedData=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Are you sure?"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"p"),t._uU(4),t.qZA()(),t.TgZ(5,"mat-dialog-actions")(6,"button",1),t._uU(7,"Yes"),t.qZA(),t.TgZ(8,"button",1),t._uU(9,"No"),t.qZA()()),2&e&&(t.xp6(4),t.hij("You already got ",i.passedData.progress,"%"),t.xp6(2),t.Q6J("mat-dialog-close",!0),t.xp6(2),t.Q6J("mat-dialog-close",!1))},dependencies:[h.lW,p.ZT,p.uh,p.xY,p.H8]}),n})();var D=o(5698);let E=(()=>{class n{constructor(e,i,r){this.dialog=e,this.trainingService=i,this.store=r,this.progress=0}ngOnInit(){this.startOrResumeTimer()}startOrResumeTimer(){this.store.select(g.l3).pipe((0,D.q)(1)).subscribe(e=>{this.timer=setInterval(()=>{this.progress=this.progress+1,this.progress>=100&&(this.trainingService.completeExercise(),clearInterval(this.timer))},e.duration/100*1e3)})}onStop(){clearInterval(this.timer),this.dialog.open(M,{data:{progress:this.progress}}).afterClosed().subscribe(i=>{i?this.trainingService.cancelExercise(this.progress):this.startOrResumeTimer()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.uw),t.Y36(T.O),t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training"],["mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0),t._UZ(1,"mat-progress-spinner",1),t.TgZ(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Keep on going, you can do it!"),t.qZA(),t.TgZ(6,"button",2),t.NdJ("click",function(){return i.onStop()}),t._uU(7,"Stop"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("value",i.progress),t.xp6(2),t.hij("",i.progress,"%"))},dependencies:[h.lW,y.Ou,l.xw,l.Wh],styles:[".current-training[_ngcontent-%COMP%]{padding:30px}"]}),n})();var s=o(671),Z=o(6308),v=o(8739),$=o(4144),R=o(3336);function q(n,a){1&n&&(t.TgZ(0,"mat-header-cell",15),t._uU(1,"Date"),t.qZA())}function H(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.date.toMillis(),"yyyy-MM-dd"))}}function B(n,a){1&n&&(t.TgZ(0,"mat-header-cell",15),t._uU(1,"Name"),t.qZA())}function W(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.name)}}function X(n,a){1&n&&(t.TgZ(0,"mat-header-cell",15),t._uU(1,"Calories"),t.qZA())}function z(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.calories))}}function G(n,a){1&n&&(t.TgZ(0,"mat-header-cell",15),t._uU(1,"Duration"),t.qZA())}function j(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.duration))}}function K(n,a){1&n&&(t.TgZ(0,"mat-header-cell",15),t._uU(1,"State"),t.qZA())}function V(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.state)}}function k(n,a){1&n&&t._UZ(0,"mat-header-row")}function tt(n,a){1&n&&t._UZ(0,"mat-row")}const nt=function(){return[5,10,20]};let et=(()=>{class n{constructor(e,i){this.trainingService=e,this.store=i,this.displayedColumns=["date","name","duration","calories","state"],this.dataSource=new s.by}ngOnInit(){this.store.select(g.JP).subscribe(e=>{this.dataSource.data=e}),this.trainingService.fetchCompletedOrCanceledExercises()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}doFilter(e){this.dataSource.filter=e.trim().toLowerCase()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.O),t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-past-trainings"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Z.YE,5),t.Gf(v.NW,5)),2&e){let r;t.iGM(r=t.CRH())&&(i.sort=r.first),t.iGM(r=t.CRH())&&(i.paginator=r.first)}},decls:26,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","40%"],["matInput","","type","text",3,"keyup"],["matPrefix",""],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Search"),t.qZA(),t.TgZ(4,"input",2),t.NdJ("keyup",function(A){return i.doFilter(A.target.value)}),t.qZA(),t.TgZ(5,"mat-icon",3),t._uU(6,"search"),t.qZA()()(),t.TgZ(7,"mat-table",4),t.ynx(8,5),t.YNc(9,q,2,0,"mat-header-cell",6),t.YNc(10,H,3,4,"mat-cell",7),t.BQk(),t.ynx(11,8),t.YNc(12,B,2,0,"mat-header-cell",6),t.YNc(13,W,2,1,"mat-cell",7),t.BQk(),t.ynx(14,9),t.YNc(15,X,2,0,"mat-header-cell",6),t.YNc(16,z,3,3,"mat-cell",7),t.BQk(),t.ynx(17,10),t.YNc(18,G,2,0,"mat-header-cell",6),t.YNc(19,j,3,3,"mat-cell",7),t.BQk(),t.ynx(20,11),t.YNc(21,K,2,0,"mat-header-cell",6),t.YNc(22,V,2,1,"mat-cell",7),t.BQk(),t.YNc(23,k,1,0,"mat-header-row",12),t.YNc(24,tt,1,0,"mat-row",13),t.qZA(),t._UZ(25,"mat-paginator",14)),2&e&&(t.xp6(7),t.Q6J("dataSource",i.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSize",1)("pageSizeOptions",t.DdM(5,nt)))},dependencies:[f.KE,f.hX,f.qo,$.Nt,R.Hw,v.NW,Z.YE,Z.nU,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,l.Wh,l.yH,c.JJ,c.uU]}),n})();function at(n,a){1&n&&(t.TgZ(0,"mat-tab-group")(1,"mat-tab",1),t._UZ(2,"app-new-training"),t.qZA(),t.TgZ(3,"mat-tab",2),t._UZ(4,"app-past-trainings"),t.qZA()())}function it(n,a){1&n&&t._UZ(0,"app-current-training")}const ot=[{path:"",component:(()=>{class n{constructor(e){this.store=e}ngOnInit(){this.ongoingTraining$=this.store.select(g.aH)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-training"]],decls:4,vars:6,consts:[[4,"ngIf"],["label","New Exercise"],["label","Past Exercises"]],template:function(e,i){1&e&&(t.YNc(0,at,5,0,"mat-tab-group",0),t.ALo(1,"async"),t.YNc(2,it,1,0,"app-current-training",0),t.ALo(3,"async")),2&e&&(t.Q6J("ngIf",!t.lcZ(1,2,i.ongoingTraining$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,i.ongoingTraining$)))},dependencies:[c.O5,_.SP,_.uX,F,E,et,c.Ov]}),n})()}];let rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.Bz.forChild(ot),C.Bz]}),n})(),st=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[N.m,S.yb,rt,u.Aw.forFeature("training",g.ue)]}),n})()}}]);